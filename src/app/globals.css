/* ========================================
   AI Hair Studio — 프리미엄 듀얼 테마 디자인 시스템
   ▸ 라이트: 소프트 라벤더/퍼플 (프리미엄 파스텔)
   ▸ 다크: 딥 네이비/퍼플
   ======================================== */

/* 폰트 로드 */
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* ── 라이트 테마 (기본) — 소프트 라벤더 ── */
:root,
[data-theme="light"] {
    /* 배경 — 라벤더 파스텔 + 그라데이션 레이어 */
    --bg-primary: #ede0f5;
    --bg-secondary: #e2d1f0;
    --bg-tertiary: #d6c2ea;
    --bg-gradient: linear-gradient(160deg,
            #f2e4fa 0%,
            #ede0f5 20%,
            #e4d5f0 40%,
            #eedcf7 60%,
            #e7d0f2 80%,
            #f0e1f8 100%);
    --bg-card: rgba(255, 255, 255, 0.60);
    --bg-card-hover: rgba(255, 255, 255, 0.82);
    --bg-glass: rgba(255, 255, 255, 0.45);
    --bg-glass-strong: rgba(255, 255, 255, 0.65);

    /* 텍스트 */
    --text-primary: #2a1f3d;
    --text-secondary: #524168;
    --text-tertiary: #7e6e99;
    --text-muted: #a99bbe;

    /* 액센트 — 퍼플 */
    --accent: #9b6bbf;
    --accent-light: #b58ed6;
    --accent-dim: rgba(155, 107, 191, 0.12);
    --accent-glow: rgba(155, 107, 191, 0.22);
    --accent-gradient: linear-gradient(135deg, #b58ed6 0%, #9b6bbf 50%, #8254a8 100%);

    /* 상태 */
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;

    /* 테두리 */
    --border: rgba(155, 107, 191, 0.18);
    --border-light: rgba(155, 107, 191, 0.08);
    --border-accent: rgba(155, 107, 191, 0.35);

    /* 그림자 */
    --shadow-sm: 0 1px 3px rgba(80, 50, 120, 0.10);
    --shadow-md: 0 4px 12px rgba(80, 50, 120, 0.12);
    --shadow-lg: 0 8px 30px rgba(80, 50, 120, 0.14);
    --shadow-glow: 0 0 20px rgba(155, 107, 191, 0.20);
    --shadow-glow-strong: 0 0 40px rgba(155, 107, 191, 0.30);

    /* 특수 */
    --overlay-bg: rgba(237, 224, 245, 0.92);
    --header-bg: rgba(237, 224, 245, 0.85);
    --input-bg: rgba(255, 255, 255, 0.55);
    --upload-border: rgba(155, 107, 191, 0.25);
    --upload-bg: rgba(255, 255, 255, 0.40);
    --tab-indicator: var(--accent);
    --tab-active-text: #fff;
    --tab-active-bg: var(--accent);
    --tab-inactive-text: var(--text-secondary);
    --slider-track: rgba(155, 107, 191, 0.15);
    --toast-bg: rgba(42, 31, 61, 0.9);
    --toast-text: #fff;

    color-scheme: light;
}

/* ── 다크 테마 ── */
[data-theme="dark"] {
    --bg-primary: #0a0a12;
    --bg-secondary: #111119;
    --bg-tertiary: #18181f;
    --bg-card: rgba(255, 255, 255, 0.04);
    --bg-card-hover: rgba(255, 255, 255, 0.07);
    --bg-glass: rgba(255, 255, 255, 0.06);
    --bg-glass-strong: rgba(255, 255, 255, 0.10);

    --text-primary: #f0f0f5;
    --text-secondary: #a0a0b0;
    --text-tertiary: #65657a;
    --text-muted: #45455a;

    --accent: #a78bfa;
    --accent-light: #c4b5fd;
    --accent-dim: rgba(167, 139, 250, 0.15);
    --accent-glow: rgba(167, 139, 250, 0.22);
    --accent-gradient: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 50%, #c4b5fd 100%);

    --success: #34d399;
    --warning: #fbbf24;
    --danger: #f87171;

    --border: rgba(255, 255, 255, 0.08);
    --border-light: rgba(255, 255, 255, 0.04);
    --border-accent: rgba(167, 139, 250, 0.25);

    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.6);
    --shadow-glow: 0 0 20px rgba(167, 139, 250, 0.2);
    --shadow-glow-strong: 0 0 40px rgba(167, 139, 250, 0.3);

    --overlay-bg: rgba(10, 10, 18, 0.92);
    --header-bg: rgba(10, 10, 18, 0.85);
    --input-bg: rgba(255, 255, 255, 0.05);
    --upload-border: rgba(167, 139, 250, 0.2);
    --upload-bg: rgba(255, 255, 255, 0.03);
    --tab-indicator: var(--accent);
    --tab-active-text: #fff;
    --tab-active-bg: var(--accent);
    --tab-inactive-text: var(--text-secondary);
    --slider-track: rgba(167, 139, 250, 0.15);
    --toast-bg: rgba(255, 255, 255, 0.12);
    --toast-text: #f0f0f5;

    color-scheme: dark;
}

/* ── 타이포그래피 & 스페이싱 (테마 무관) ── */
:root {
    --font-primary: 'Pretendard Variable', 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-display: 'Inter', var(--font-primary);

    --fs-xs: 0.6875rem;
    --fs-sm: 0.8125rem;
    --fs-base: 0.9375rem;
    --fs-lg: 1.0625rem;
    --fs-xl: 1.25rem;
    --fs-2xl: 1.5rem;
    --fs-3xl: 2rem;

    --sp-1: 4px;
    --sp-2: 8px;
    --sp-3: 12px;
    --sp-4: 16px;
    --sp-5: 20px;
    --sp-6: 24px;
    --sp-8: 32px;
    --sp-10: 40px;

    --r-sm: 8px;
    --r-md: 12px;
    --r-lg: 16px;
    --r-xl: 20px;
    --r-2xl: 24px;
    --r-full: 9999px;

    --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
    --dur-fast: 150ms;
    --dur-base: 250ms;
    --dur-slow: 400ms;
}

/* P3 색영역 — 웹/모바일 색상 통일 */
@supports (color: color(display-p3 1 0 0)) {

    :root,
    [data-theme="light"] {
        --accent: color(display-p3 0.608 0.420 0.749);
        --accent-light: color(display-p3 0.710 0.557 0.839);
    }

    [data-theme="dark"] {
        --accent: color(display-p3 0.655 0.545 0.98);
        --accent-light: color(display-p3 0.77 0.71 0.99);
    }
}

/* ── 리셋 & 글로벌 ── */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    background-color: var(--bg-primary);
}

body {
    font-family: var(--font-primary);
    color: var(--text-primary);
    background: var(--bg-gradient, var(--bg-primary));
    background-attachment: fixed;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
    touch-action: manipulation;
    /* 중앙 정렬 — 데스크탑에서도 모바일 레이아웃 유지 */
    max-width: 480px;
    margin: 0 auto;
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    transition: background var(--dur-slow) var(--ease-out),
        color var(--dur-slow) var(--ease-out);
}

input,
button,
textarea,
select {
    font-family: inherit;
    font-size: inherit;
}

button {
    cursor: pointer;
    border: none;
    background: none;
    -webkit-tap-highlight-color: transparent;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
}

a {
    color: inherit;
    text-decoration: none;
}

/* ── 유틸리티 ── */
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
    display: none;
}

/* ── 글래스모피즘 ── */
.glass {
    background: var(--bg-glass);
    backdrop-filter: blur(20px) saturate(1.2);
    -webkit-backdrop-filter: blur(20px) saturate(1.2);
    border: 1px solid var(--border);
}

.glass-strong {
    background: var(--bg-glass-strong);
    backdrop-filter: blur(30px) saturate(1.4);
    -webkit-backdrop-filter: blur(30px) saturate(1.4);
    border: 1px solid rgba(255, 255, 255, 0.12);
}